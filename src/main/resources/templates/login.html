<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="assets/css/login.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<title>Login Form Using HTML And CSS Only</title>
</head>
<body>
	<div class="container" id="container">
		<div class="form-container log-in-container">
			<script src="https://www.google.com/recaptcha/api.js"></script>
			<form th:action="@{/login}" method="post" id="loginform">
					
				<!-- error message -->
				<div th:if="${param.error}">
					<div class="alert alert-danger">[[(${session.SPRING_SECURITY_LAST_EXCEPTION.message})]]</div>
				</div>

				<!-- otp message -->
				<div th:if="${param.otp}">
					<div class="alert alert-danger">For Security Reasons we have sent you an otp to email [[${param.email}]] </div>
				</div>
			
				<!-- logout message -->
				<div th:if="${param.logout}">
					<div class="alert alert-info">You have been logged out.</div>
				</div>
				
				<div class = "form-group">
					<label for ="username"> Username </label> 
					<input type="text" class = "form-control" id ="username" name = "username" th:value="${param.email}"
					placeholder="Enter Email ID" autofocus="autofocus">
				</div>
				
				<div class="form-group">
					<label for="password">Password</label> <input type="password" 
						id="password" name="password" class="form-control" 
						th:placeholder="${param.otp != null ? 'Your One-Time Password': 'password'}"
						/>
				</div>
				
				<div class="form-group">
					<div class="row">
						<div class="col-sm-6 col-sm-offset-3">
							<button class = "g-recaptcha btn btn-primary" 
							data-sitekey="6LexEuQdAAAAAIlrMB0K33ABGoNRycbEj7XHoJVH" 
							data-callback="onSubmit" 
							data-action="submit">Login</button>
							<br></br>
					<span>Already registered? <a href="/" th:href="@{/registration}">Sign Up</a></span>
						</div>
					</div>
				</div>
				<br></br>
					
			</form>
			
			
		</div>
		<div class="overlay-container">
			<div class="overlay">
				<div class="overlay-panel overlay-right">
					<h1>Welcome To Zou</h1>
					<p>This Login Sends You To Analysis And Predictions For Smart Farming</p>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript">
		function onSubmit(token) {
			document.getElementById("loginform").submit();
		}
	</script>	
</body>
</html>